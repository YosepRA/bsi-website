{"version":3,"file":"index.js","mappings":"mBAAwBA,SAASC,cAAc,uBACrBD,SAASC,cAAc,yBACzBD,SAASC,cAAc,uBCQhCD,SAASC,cAAc,WACfD,SAASC,cAAc,M","sources":["webpack://bsi-web-client/./src/js/live-price.js","webpack://bsi-web-client/./src/js/index.js"],"sourcesContent":["const navbarPriceData = document.querySelector('.navbar__price-data');\r\nconst navbarPriceChange = document.querySelector('.navbar__price-change');\r\nconst navbarPriceTime = document.querySelector('.navbar__price-time');\r\n\r\nasync function fetchLatestPrice() {\r\n  const baseUrl = '/api/v1';\r\n\r\n  const data = await fetch(`${baseUrl}/price`).then((res) => res.json());\r\n\r\n  return data;\r\n}\r\n\r\nasync function updatePriceData(data) {\r\n  // const data = await fetchLatestPrice();\r\n  const priceText = `$${data.price}`;\r\n  const changeText = `${data.change24Hr > 0 ? '+' : ''}${\r\n    Math.round(data.change24Hr * 100) / 100\r\n  }%`;\r\n  const timeText = new Date(data.lastUpdatedAt).toLocaleString();\r\n\r\n  navbarPriceData.textContent = priceText;\r\n  navbarPriceChange.textContent = changeText;\r\n  navbarPriceTime.textContent = timeText;\r\n\r\n  // Toggle 24 hour change text color.\r\n  if (data.change24Hr > 0) {\r\n    navbarPriceChange.classList.add('navbar__price-change--up');\r\n    navbarPriceChange.classList.remove('navbar__price-change--down');\r\n  } else {\r\n    navbarPriceChange.classList.add('navbar__price-change--down');\r\n    navbarPriceChange.classList.remove('navbar__price-change--up');\r\n  }\r\n}\r\n\r\nfunction fetchPriceOnInterval(delay) {\r\n  setInterval(async () => {\r\n    const data = await fetchLatestPrice(data);\r\n\r\n    updatePriceData(data);\r\n  }, delay);\r\n}\r\n\r\nexport { fetchLatestPrice, fetchPriceOnInterval, updatePriceData };\r\n","import { ready } from './helpers.js';\r\nimport ScrollControl from './scroll-control.js';\r\nimport { navbarScroll, floatingButtonScroll } from './scroll-behaviors.js';\r\nimport {\r\n  fetchLatestPrice,\r\n  updatePriceData,\r\n  fetchPriceOnInterval,\r\n} from './live-price.js';\r\n// import startSocket from './socket.js';\r\n\r\nconst navbar = document.querySelector('.navbar');\r\nconst floatingButton = document.querySelector('.fb');\r\n\r\nasync function start() {\r\n  // Scroll feature.\r\n  const scroll = new ScrollControl([\r\n    navbarScroll(navbar),\r\n    floatingButtonScroll(floatingButton),\r\n  ]);\r\n\r\n  // Live price feature.\r\n  const data = await fetchLatestPrice();\r\n  const delay = 120000;\r\n\r\n  await updatePriceData(data);\r\n\r\n  fetchPriceOnInterval(delay);\r\n\r\n  // Socket will be disabled on Demo server, or Cyclic.sh server.\r\n  // startSocket();\r\n}\r\n\r\n// ready(start);\r\n"],"names":["document","querySelector"],"sourceRoot":""}