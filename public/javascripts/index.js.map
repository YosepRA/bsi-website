{"version":3,"file":"index.js","mappings":"mBAAwBA,SAASC,cAAc,uBACrBD,SAASC,cAAc,yBACzBD,SAASC,cAAc,uBCQhCD,SAASC,cAAc,WACfD,SAASC,cAAc,M","sources":["webpack://bsi-web-client/./src/js/live-price.js","webpack://bsi-web-client/./src/js/index.js"],"sourcesContent":["const navbarPriceData = document.querySelector('.navbar__price-data');\r\nconst navbarPriceChange = document.querySelector('.navbar__price-change');\r\nconst navbarPriceTime = document.querySelector('.navbar__price-time');\r\n\r\nasync function fetchLatestPrice() {\r\n  const baseUrl = '/api/v1';\r\n\r\n  const data = await fetch(`${baseUrl}/price`).then((res) => res.json());\r\n\r\n  return data;\r\n}\r\n\r\nasync function updatePriceData(data) {\r\n  // const data = await fetchLatestPrice();\r\n  const priceText = `$${data.price}`;\r\n  const changeText = `${data.change24Hr > 0 ? '+' : ''}${\r\n    Math.round(data.change24Hr * 100) / 100\r\n  }%`;\r\n  const timeText = new Date(data.lastUpdatedAt).toLocaleString();\r\n\r\n  navbarPriceData.textContent = priceText;\r\n  navbarPriceChange.textContent = changeText;\r\n  navbarPriceTime.textContent = timeText;\r\n\r\n  // Toggle 24 hour change text color.\r\n  if (data.change24Hr > 0) {\r\n    navbarPriceChange.classList.add('navbar__price-change--up');\r\n    navbarPriceChange.classList.remove('navbar__price-change--down');\r\n  } else {\r\n    navbarPriceChange.classList.add('navbar__price-change--down');\r\n    navbarPriceChange.classList.remove('navbar__price-change--up');\r\n  }\r\n}\r\n\r\nfunction fetchPriceOnInterval(delay) {\r\n  setInterval(async () => {\r\n    const data = await fetchLatestPrice(data);\r\n\r\n    updatePriceData(data);\r\n  }, delay);\r\n}\r\n\r\nexport { fetchLatestPrice, fetchPriceOnInterval, updatePriceData };\r\n","import { ready } from './helpers.js';\nimport ScrollControl from './scroll-control.js';\nimport { navbarScroll, floatingButtonScroll } from './scroll-behaviors.js';\nimport {\n  fetchLatestPrice,\n  updatePriceData,\n  fetchPriceOnInterval,\n} from './live-price.js';\n// import startSocket from './socket.js';\n\nconst navbar = document.querySelector('.navbar');\nconst floatingButton = document.querySelector('.fb');\n\nasync function start() {\n  // Scroll feature.\n  const scroll = new ScrollControl([\n    navbarScroll(navbar),\n    floatingButtonScroll(floatingButton),\n  ]);\n\n  // Live price feature.\n  const data = await fetchLatestPrice();\n  const delay = 120000;\n\n  await updatePriceData(data);\n\n  fetchPriceOnInterval(delay);\n\n  // Socket will be disabled on Demo server, or Cyclic.sh server.\n  // startSocket();\n}\n\n// ready(start);\n"],"names":["document","querySelector"],"sourceRoot":""}